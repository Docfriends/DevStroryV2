<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>í…”ë ˆê·¸ë¨ ì›¹í›… ë°›ê¸°</title>

  <!-- CSS -->
  <link rel="stylesheet" href="/DevStrory/assets/css/main.css" type="text/css">

  <!-- Font -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Docfriends ê¸°ìˆ  ë¸”ë¡œê·¸" href="/DevStrory/feed.xml" />
    <link href="https://docfriends.github.io/DevStrory/assets/images/favicon.ico" rel="shortcut icon"
          type="image/x-icon"/>
    <link href="https://docfriends.github.io/DevStrory/assets/images/logo.png" rel="icon" type="image/png"/>


  <meta name="apple-mobile-web-app-title" content="DocfriendsTec" />
  <meta name="description" content="ë‹¥í”„ë Œì¦ˆì˜ ê¸°ìˆ  ë¸”ë¡œê·¸"/>
  <meta property="og:title" content="ë‹¥í”„ë Œì¦ˆ">
    <meta content="https://docfriends.github.io/DevStrory/" property="og:url">
    <meta content="https://docfriends.github.io/DevStrory/assets/images/logo.png" property="og:image">
  <meta property="og:description" content="ë‹¥í”„ë Œì¦ˆì˜ ê¸°ìˆ  ë¸”ë¡œê·¸"/>
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="">
    <meta content="https://docfriends.github.io/DevStrory/" name="twitter:url">
    <meta content="https://docfriends.github.io/DevStrory/assets/images/logo.png" name="twitter:image">
  <meta name="twitter:description" content="ë‹¥í”„ë Œì¦ˆì˜ ê¸°ìˆ  ë¸”ë¡œê·¸"/>


  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>í…”ë ˆê·¸ë¨ ì›¹í›… ë°›ê¸° | Docfriends ê¸°ìˆ  ë¸”ë¡œê·¸</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="í…”ë ˆê·¸ë¨ ì›¹í›… ë°›ê¸°" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="í…”ë ˆê·¸ë¨ì—ì„œ ì›¹í›…ìœ¼ë¡œ ë°ì´í„° ë°›ê³  í…”ë ˆê·¸ë¨ìœ¼ë¡œ ë°ì´í„° ë³´ë‚´ê¸°" />
<meta property="og:description" content="í…”ë ˆê·¸ë¨ì—ì„œ ì›¹í›…ìœ¼ë¡œ ë°ì´í„° ë°›ê³  í…”ë ˆê·¸ë¨ìœ¼ë¡œ ë°ì´í„° ë³´ë‚´ê¸°" />
<link rel="canonical" href="http://localhost:4000/DevStrory/2019-05-22/telegram-webhook/" />
<meta property="og:url" content="http://localhost:4000/DevStrory/2019-05-22/telegram-webhook/" />
<meta property="og:site_name" content="Docfriends ê¸°ìˆ  ë¸”ë¡œê·¸" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-05-22T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="í…”ë ˆê·¸ë¨ ì›¹í›… ë°›ê¸°" />
<script type="application/ld+json">
{"url":"http://localhost:4000/DevStrory/2019-05-22/telegram-webhook/","headline":"í…”ë ˆê·¸ë¨ ì›¹í›… ë°›ê¸°","datePublished":"2019-05-22T00:00:00+09:00","dateModified":"2019-05-22T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/DevStrory/2019-05-22/telegram-webhook/"},"description":"í…”ë ˆê·¸ë¨ì—ì„œ ì›¹í›…ìœ¼ë¡œ ë°ì´í„° ë°›ê³  í…”ë ˆê·¸ë¨ìœ¼ë¡œ ë°ì´í„° ë³´ë‚´ê¸°","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->



  <!-- Google Analytics -->

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-131153272-1', 'auto');
ga('send', 'pageview');

</script>



</head>

<body>
  <div class="content-container">
    <header class="header">
  <div class="header-title">
    <a href="http://localhost:4000/DevStrory">Docfriends ê¸°ìˆ  ë¸”ë¡œê·¸</a>
  </div>
  <nav class="header-nav">
    
    
    <a href="/DevStrory/">Post</a>
    
    
    
    <a href="/DevStrory/member">Member</a>
    
    
    
    <a href="/DevStrory/archive">Archive</a>
    
    
    
    <a href="/DevStrory/tags">Tags</a>
    
    
    
    <a href="https://github.com/Docfriends">Github</a>
    
    
  </nav>
</header>

<div class="post, container-content">
  <div class="post-title">í…”ë ˆê·¸ë¨ ì›¹í›… ë°›ê¸°</div>




<div class="post-writergroup">
  <a class="post-writerselect" href="https://github.com/pikachu987" title="https://github.com/pikachu987">
    <span class="post-writer" >Writer: ê¹€ê´€í˜¸ </span>
    <img class="post-profile" src="http://localhost:4000/DevStrory/assets/images/member/pikachu987.png" onerror="this.src='http://localhost:4000/DevStrory/assets/images/member/defaultProfile.png'">
  </a>
</div>




  <span class="post-date">
    <time>22 May 2019</time>
  </span>
  <div class="post-tag">
    <ul>
      
      <li>
        <a href="http://localhost:4000/DevStrory/tags#Telegram">
          <span>Telegram</span>
        </a>
      </li>
      
      
      <li>
        <a href="http://localhost:4000/DevStrory/tags#Webhook">
          <span>Webhook</span>
        </a>
      </li>
      
      
    </ul>
  </div>

  <p><a href="https://core.telegram.org/bots/api" target="blank">í…”ë ˆê·¸ë¨ ë´‡ ì‚¬ì´íŠ¸</a></p>

<h3 id="1ë´‡-ë§Œë“¤ê¸°">1.ë´‡ ë§Œë“¤ê¸°</h3>

<h5 id="1-botfather">1) BotFather</h5>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/botFather.png" alt="BotFather" /></p>

<p>í…”ë ˆê·¸ë¨ì—ì„œ BotFatherë¥¼ ì°¾ìŠµë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/botFatherStart.png" alt="BotFatherStart" /></p>

<p>BotFatherë¥¼ ì„ íƒí•˜ê³  Start ë²„íŠ¼ì„ ëˆ„ë¦…ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/botFatherStartInput.png" alt="BotFatherStartInput" /></p>

<p>ì—¬ëŸ¬ê°€ì§€ ë©”ë‰´ê°€ ë‚˜ì˜µë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/newBot.png" alt="NewBot" /></p>

<p><code class="language-plaintext highlighter-rouge">/newbot</code>ì„ ì…ë ¥í•©ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/name.png" alt="Name" /></p>

<p>ë´‡ì˜ ì´ë¦„ì„ ì ìŠµë‹ˆë‹¤.<br />
ì›í•˜ëŠ” ì´ë¦„ì„ ì ìœ¼ë©´ ë©ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/botId.png" alt="BotId" /></p>

<p>ë´‡ì˜ ìœ ì €ë„¤ì„ì„ ì…ë ¥í•©ë‹ˆë‹¤.<br />
ë´‡ì˜ ìœ ì €ë„¤ì„ì€ ì¤‘ë³µì´ ì•ˆë©ë‹ˆë‹¤.<br />
ë´‡ì˜ í† í°ì´ ë‚˜ì™”ìŠµë‹ˆë‹¤ ğŸ‰ğŸ‰ğŸ‰</p>

<h5 id="2-ì±„íŒ…ë°©-id">2) ì±„íŒ…ë°© ID</h5>

<p>ë´‡ê³¼ ëŒ€í™”í•œ ì±„íŒ…ë°© IDëŠ” <a href="https://api.telegram.org/bot/getUpdates" target="blank">https://api.telegram.org/bot${telegramBotToken}/getUpdates</a> ì—ì„œ ì•Œìˆ˜ ìˆìŠµë‹ˆë‹¤.<br />
${telegramBotToken}ì€ ì•„ê¹Œ ì–»ì€ tokenì„ ì…ë ¥í•´ ì¤ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/emptyValue.png" alt="EmptyValue" /></p>

<p>ì•„ë¬´ê°’ì´ ì—†ë„¤ìš”.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/myBot.png" alt="MyBot" /></p>

<p>í…”ë ˆê·¸ë¨ì—ì„œ ë°©ê¸ˆ ë§Œë“  ë´‡ì„ ê²€ìƒ‰í•©ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/myBotChat.png" alt="MyBotChat" /></p>

<p>Start ë²„íŠ¼ì„ ëˆŒëŸ¬ì¤ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/start.png" alt="Start" /></p>

<p>ë‹¤ì‹œ <a href="https://api.telegram.org/bot/getUpdates" target="blank">https://api.telegram.org/bot${telegramBotToken}/getUpdates</a> ì—¬ê¸°ì—ì„œ ë´‡ í† í°ì„ ì…ë ¥í•˜ê³  ë“¤ì–´ê°€ ë´…ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/chatId.png" alt="ChatId" /></p>

<p>ë°ì´í„°ê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤ ğŸ‰ğŸ‰ğŸ‰<br />
IDëŠ” result - message - chat - id ì—ì„œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h5 id="3-id-ì°¾ê¸°">3) ID ì°¾ê¸°</h5>

<p><span>ë´‡ í† í° ì…ë ¥</span><br />
(ê²°ê³¼ê°’ ê°„ë‹¨íˆ ë³´ê¸° <input id="check_find_bot_id" checked="true" type="checkbox" />)<br />
<input id="input_bot_token" type="text" value="" placeholder="ë´‡ í† í°ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”." style="height: 40px; width: 80%; border: 2px solid black; border-radius: 5px; font-size: 15px;" />
<button id="search_bot_id" style="height:44px; width: 15%; border-top: 2px solid black; border-radius: 5px; font-size: 16px; background-color: black; color: white;">ì°¾ê¸°</button></p>
<pre id="print_bot_id" style="padding: 0px; margin: 0px;"></pre>

<h3 id="3í…”ë ˆê·¸ë¨ì—-ë©”ì‹œì§€-ë³´ë‚´ê¸°">3.í…”ë ˆê·¸ë¨ì— ë©”ì‹œì§€ ë³´ë‚´ê¸°</h3>

<h5 id="1-ë©”ì‹œì§€-ë³´ë‚´ê¸°">1) ë©”ì‹œì§€ ë³´ë‚´ê¸°</h5>

<p><a href="https://api.telegram.org/bot/sendMessage?chat_id=&amp;text=" target="blank">https://api.telegram.org/bot${telegramBotToken}/sendMessage?chat_id=${telegramChatId}&amp;text=${text}</a></p>

<p>${telegramBotToken}ì€ ë´‡ tokenì„ ì…ë ¥í•´ ì¤ë‹ˆë‹¤.<br />
${telegramChatId}ì€ ì±„íŒ… IDë¥¼ ì…ë ¥í•´ ì¤ë‹ˆë‹¤.<br />
${text}ì€ ë³´ë‚¼ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ ì¤ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/sendMessageURL.png" alt="SendMessageURL" /></p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/sendMessage.png" alt="SendMessage" /></p>

<p>ë©”ì‹œì§€ ë³´ë‚´ê¸° ì„±ê³µ ğŸ‰ğŸ‰ğŸ‰</p>

<h5 id="2-ë©”ì‹œì§€-ë³´ë‚´ê¸°-í…ŒìŠ¤íŠ¸">2) ë©”ì‹œì§€ ë³´ë‚´ê¸° í…ŒìŠ¤íŠ¸</h5>

<p><span>ë´‡ í† í° ì…ë ¥</span><br />
<input id="input_send_message_bot_token" type="text" value="" placeholder="ë´‡ í† í°ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”." style="height: 40px; width: 100%; border: 2px solid black; border-radius: 5px; font-size: 15px;" />
<span>ë³´ë‚´ì§ˆ ì±„íŒ…ë°© ID ì…ë ¥</span><br />
<input id="input_send_message_chat_id" type="text" value="" placeholder="ë³´ë‚´ì§ˆ ì±„íŒ…ë°© IDë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”." style="height: 40px; width: 100%; border: 2px solid black; border-radius: 5px; font-size: 15px;" />
<span>ë³´ë‚¼ ë©”ì‹œì§€ ì…ë ¥</span><br />
<input id="input_send_message_text" type="text" value="" placeholder="ë³´ë‚¼ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”." style="height: 40px; width: 100%; border: 2px solid black; border-radius: 5px; font-size: 15px;" /></p>

<p><button id="send_message" style="height:44px; width: 15%; border-top: 2px solid black; border-radius: 5px; font-size: 16px; background-color: black; color: white;">ë©”ì‹œì§€ ë³´ë‚´ê¸°</button></p>
<pre id="print_message" style="padding: 0px; margin: 0px;"></pre>

<h3 id="3ì›¹í›…-ë“±ë¡í•˜ê¸°">3.ì›¹í›… ë“±ë¡í•˜ê¸°</h3>

<h5 id="1-ì›¹í›…ì„-ë°›ì„-urlë§Œë“¤ê¸°">1) ì›¹í›…ì„ ë°›ì„ URLë§Œë“¤ê¸°</h5>

<p><a href="http://localhost:4000/DevStrory/2019-05-20/make-lambda#temp1" target="blank">AWS Lambda ë§Œë“¤ê¸°</a> ë¡œ ê°€ì„œ Lambda í•¨ìˆ˜ì™€ APIGatewayë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>

<h5 id="2-ì›¹í›…-ë“±ë¡">2) ì›¹í›… ë“±ë¡</h5>

<p><a href="https://api.telegram.org/bot/setWebhook?url=" target="blank">https://api.telegram.org/bot${telegramBotToken}/setWebhook?url=${callbackURL}</a></p>

<p>${telegramBotToken}ì€ ë´‡ tokenì„ ì…ë ¥í•´ ì¤ë‹ˆë‹¤.<br />
${callbackURL}ì€ Lambdaí•¨ìˆ˜ì™€ ì—°ê²°ë˜ì–´ ìˆëŠ” APIGateway URLì„ ì…ë ¥í•´ ì¤ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/webhookSuccess.png" alt="WebhookSuccess" /></p>

<p>ì›¹í›… ë“±ë¡ ì„±ê³µ ğŸ‰ğŸ‰ğŸ‰</p>

<h5 id="3-ì›¹í›…-ì‚­ì œ">3) ì›¹í›… ì‚­ì œ</h5>

<p><a href="https://api.telegram.org/bot/setWebhook?url=" target="blank">https://api.telegram.org/bot${telegramBotToken}/setWebhook?url=</a></p>

<p>${telegramBotToken}ì€ ë´‡ tokenì„ ì…ë ¥í•´ ì¤ë‹ˆë‹¤.<br />
urlì„ ë¹„ìš°ë©´ ì›¹í›… ì‚­ì œê°€ ë©ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/webhookDelete.png" alt="WebhookDelete" /></p>

<p>ì›¹í›… ì‚­ì œ ì„±ê³µ ğŸ‰ğŸ‰ğŸ‰</p>

<h5 id="4-ì›¹í›…-ë“±ë¡ì‚­ì œ">4) ì›¹í›… ë“±ë¡/ì‚­ì œ</h5>

<p><span>ë´‡ í† í° ì…ë ¥</span><br />
<input id="input_webhook_bot_token" type="text" value="" placeholder="ë´‡ í† í°ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”." style="height: 40px; width: 100%; border: 2px solid black; border-radius: 5px; font-size: 15px;" />
<span>callbackURL ì…ë ¥</span><br />
<input id="input_webhook_callbackURL" type="text" value="" placeholder="callbackURLì„ ì…ë ¥í•´ ì£¼ì„¸ìš”." style="height: 40px; width: 100%; border: 2px solid black; border-radius: 5px; font-size: 15px;" /></p>

<p><button id="webhook_set" style="height:44px; width: 15%; border-top: 2px solid black; border-radius: 5px; font-size: 16px; background-color: black; color: white;">ì›¹í›… ë“±ë¡</button>
<button id="webhook_delete" style="height:44px; width: 15%; border-top: 2px solid black; border-radius: 5px; font-size: 16px; background-color: black; color: white;">ì›¹í›… ì‚­ì œ</button>
<button id="webhook_info" style="height:44px; width: 15%; border-top: 2px solid black; border-radius: 5px; font-size: 16px; background-color: black; color: white;">ì›¹í›… ì •ë³´</button></p>
<pre id="print_webhook" style="padding: 0px; margin: 0px;"></pre>

<h3 id="4ì›¹í›…">4.ì›¹í›…</h3>

<h5 id="1-ë¡œê·¸">1) ë¡œê·¸</h5>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/lambdaConsole.png" alt="LambdaConsole" /></p>

<p>callbackURL ì— ë“±ë¡ëœ Lambdaí•¨ìˆ˜ì— eventë¥¼ Logë¡œ ì°ì–´ë³´ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">Console.log(event);</code> ë¥¼ ì ìŠµë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/chat.png" alt="Chat" /></p>

<p>ë´‡ì—ê²Œ ì±„íŒ…ì„ í•´ë´…ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/log.png" alt="Log" /></p>

<p>ì„±ê³µì ìœ¼ë¡œ ì›¹í›…ì„ ë°›ê³  ë¡œê·¸ì— ì¶œë ¥í–ˆìŠµë‹ˆë‹¤ ğŸ‰ğŸ‰ğŸ‰</p>

<h5 id="2-ì›¹í›…ì„-ë°›ê³ -í…”ë ˆê·¸ë¨ì—-ë©”ì‹œì§€-ë³´ë‚´ê¸°">2) ì›¹í›…ì„ ë°›ê³  í…”ë ˆê·¸ë¨ì— ë©”ì‹œì§€ ë³´ë‚´ê¸°</h5>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// í…”ë ˆê·¸ë¨ ë´‡ TOKEN</span>
<span class="kd">const</span> <span class="nx">TOKEN</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
<span class="c1">// ì±„íŒ…ë°© ID</span>
<span class="kd">const</span> <span class="nx">SEND_ROOM_ID</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">util</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">util</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Item</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
    <span class="nx">sendRequest</span><span class="p">(</span><span class="s2">`ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ ì‚¬ëŒ: &lt;b&gt;</span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="k">from</span><span class="p">.</span><span class="nx">username</span><span class="p">}</span><span class="s2">&lt;/b&gt;`</span><span class="p">);</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Success</span><span class="dl">"</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">sendRequest</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">hostname</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api.telegram.org</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">port</span><span class="p">:</span> <span class="mi">443</span><span class="p">,</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">},</span>
      <span class="na">path</span><span class="p">:</span> <span class="s2">`/bot</span><span class="p">${</span><span class="nx">TOKEN</span><span class="p">}</span><span class="s2">/sendMessage`</span>
  <span class="p">},</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">setEncoding</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">body</span> <span class="o">=</span> <span class="nx">body</span> <span class="o">+</span> <span class="nx">chunk</span><span class="p">;</span>
      <span class="p">});</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
      <span class="p">});</span>
  <span class="p">});</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">problem with request: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">util</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="dl">"</span><span class="s2">%j</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">chat_id</span><span class="dl">"</span><span class="p">:</span> <span class="nx">SEND_ROOM_ID</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="nx">message</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">parse_mode</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">HTML</span><span class="dl">"</span>
  <span class="p">}));</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Model</span>

<span class="kd">function</span> <span class="nx">Item</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">update_id</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">update_id</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Message</span><span class="p">(</span><span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="p">{});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Message</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">message_id</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">message_id</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="k">from</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">From</span><span class="p">(</span><span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">from</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="p">{});</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">chat</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Chat</span><span class="p">(</span><span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">chat</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="p">{});</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">date</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">date</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">caption</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">caption</span><span class="dl">"</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">photo</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">photo</span><span class="dl">"</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">photos</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">photo</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">photo</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">item</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">photos</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">Photo</span><span class="p">(</span><span class="nx">item</span> <span class="o">||</span> <span class="p">{}));</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">photo</span> <span class="o">=</span> <span class="nx">photos</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">Chat</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">first_name</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">first_name</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">last_name</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">last_name</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">];</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">From</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">is_bot</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">is_bot</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">first_name</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">first_name</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">last_name</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">last_name</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">language_code</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">language_code</span><span class="dl">"</span><span class="p">];</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Photo</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">file_id</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">file_id</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">file_size</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">file_size</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">width</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">height</span><span class="dl">"</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Lambda ì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•´ë´…ë‹ˆë‹¤.</p>

<p>Chatì€ Chatì— ëŒ€í•´ì„œ ë‚˜ì˜µë‹ˆë‹¤.<br />
Fromì€ ì±„íŒ…ì„ ë³´ë‚¸ ì‚¬ëŒì— ëŒ€í•´ ë‚˜ì˜µë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/testComplete.png" alt="TestComplete" /></p>

<p>ì„±ê³µ ğŸ‰ğŸ‰ğŸ‰</p>

<h5 id="3-í…”ë ˆê·¸ë¨-ê·¸ë£¹ë°©ì—-ë´‡-ì¶”ê°€">3) í…”ë ˆê·¸ë¨ ê·¸ë£¹ë°©ì— ë´‡ ì¶”ê°€</h5>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/groupInfo.png" alt="GroupInfo" /></p>

<p>ê·¸ë£¹ë°© Infoì—ì„œ <strong>Add Members</strong> ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/groupBotSearch.png" alt="GroupBotSearch" /></p>

<p>ì¶”ê°€í•  ë´‡ì„ ì°¾ìŠµë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/groupBotAdd.png" alt="GroupBotAdd" /></p>

<p>ë´‡ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>

<p><strong>ë˜ëŠ”</strong></p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/botInfo.png" alt="BotInfo" /></p>

<p>ë´‡ Infoì—ì„œ Add To Groupë¥¼ ì„ íƒí•©ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/botGroup.png" alt="BotGroup" /></p>

<p>ê·¸ë£¹ì„ ì°¾ê³  ì¶”ê°€ë¥¼ í•©ë‹ˆë‹¤.</p>

<p><br /><br /><br /></p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/groupEdit.png" alt="GroupEdit" /></p>

<p>ê·¸ë£¹ë°© Infoì—ì„œ Administratorsë¥¼ ëˆ„ë¦…ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/groupAddAdmin.png" alt="GroupAddAdmin" /></p>

<p>Add Admin(ê´€ë¦¬ì ì¶”ê°€)ë¥¼ í•©ë‹ˆë‹¤.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/groupAddBotAdmin.png" alt="GroupAddBotAdmin" /></p>

<p>í…ŒìŠ¤íŠ¸ë´‡ì— ê´€ë¦¬ì ê¶Œí•œì„ ì¤ë‹ˆë‹¤.</p>

<p>ë©”ì‹œì§€ë¥¼ ë°›ìœ¼ë©´ ê·¸ë£¹ë°©ì— ë°”ë¡œ ë³´ë‚´ë„ë¡ Lambda ì†ŒìŠ¤ë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// í…”ë ˆê·¸ë¨ ë´‡ TOKEN</span>
<span class="kd">const</span> <span class="nx">TOKEN</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">util</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">util</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Item</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
    <span class="nx">sendRequest</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="nx">chat</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="s2">`ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ ì‚¬ëŒ: &lt;b&gt;</span><span class="p">${</span><span class="nx">item</span><span class="p">.</span><span class="nx">message</span><span class="p">.</span><span class="k">from</span><span class="p">.</span><span class="nx">username</span><span class="p">}</span><span class="s2">&lt;/b&gt;`</span><span class="p">);</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">},</span>
        <span class="na">body</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Success</span><span class="dl">"</span>
    <span class="p">});</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">sendRequest</span><span class="p">(</span><span class="nx">chatId</span><span class="p">,</span> <span class="nx">message</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">({</span>
      <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">hostname</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api.telegram.org</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">port</span><span class="p">:</span> <span class="mi">443</span><span class="p">,</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">},</span>
      <span class="na">path</span><span class="p">:</span> <span class="s2">`/bot</span><span class="p">${</span><span class="nx">TOKEN</span><span class="p">}</span><span class="s2">/sendMessage`</span>
  <span class="p">},</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">setEncoding</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">body</span> <span class="o">=</span> <span class="nx">body</span> <span class="o">+</span> <span class="nx">chunk</span><span class="p">;</span>
      <span class="p">});</span>
      <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
      <span class="p">});</span>
  <span class="p">});</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">problem with request: </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">util</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="dl">"</span><span class="s2">%j</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">chat_id</span><span class="dl">"</span><span class="p">:</span> <span class="nx">chatId</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">:</span> <span class="nx">message</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">parse_mode</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">HTML</span><span class="dl">"</span>
  <span class="p">}));</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// Model</span>

<span class="kd">function</span> <span class="nx">Item</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">update_id</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">update_id</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Message</span><span class="p">(</span><span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">message</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="p">{});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Message</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">message_id</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">message_id</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="k">from</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">From</span><span class="p">(</span><span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">from</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="p">{});</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">chat</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Chat</span><span class="p">(</span><span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">chat</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="p">{});</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">date</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">date</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">caption</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">caption</span><span class="dl">"</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">photo</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">photo</span><span class="dl">"</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">photos</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">photo</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">photo</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">item</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">photos</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">Photo</span><span class="p">(</span><span class="nx">item</span> <span class="o">||</span> <span class="p">{}));</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">photo</span> <span class="o">=</span> <span class="nx">photos</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">Chat</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">first_name</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">first_name</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">last_name</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">last_name</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">];</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">From</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">is_bot</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">is_bot</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">first_name</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">first_name</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">last_name</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">last_name</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">username</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">username</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">language_code</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">language_code</span><span class="dl">"</span><span class="p">];</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Photo</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">file_id</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">file_id</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">file_size</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">file_size</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">width</span><span class="dl">"</span><span class="p">];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">element</span><span class="p">[</span><span class="dl">"</span><span class="s2">height</span><span class="dl">"</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div>

<p><img src="http://localhost:4000/DevStrory/images/2019/telegram-webhook/groupMessageSuccess.png" alt="GroupMessageSuccess" /></p>

<p>ì„±ê³µ ğŸ‰ğŸ‰ğŸ‰</p>

<blockquote>
  <p>ë§Œì•½ ë´‡ì´ ì‘ë™ì„ ì•ˆí•˜ë©´ /start ë¥¼ ì ì–´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>
</blockquote>

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>

<script type="text/javascript">
$(document).ready(function() {

  $("#search_bot_id").click(function() {
    const telegramBotToken = $("#input_bot_token").val();

    if (telegramBotToken == "" || telegramBotToken == undefined) {
      $("#print_bot_id").empty();
      $("#print_bot_id").append("Bot í† í°ì„ ì…ë ¥í•˜ì„¸ìš”.");
      return
    }
    const urlPath = "https://api.telegram.org/bot"+telegramBotToken+"/getUpdates";

    $.ajax({
          type: "GET",
          url: urlPath,
          success: function(args) {
            $("#print_bot_id").empty();
            if ($("#check_find_bot_id").is(':checked')) {
              var results =  args["result"] || [];
              var chats = [];
              results.forEach(function (item, index, array) {
                var chat = (item["message"] || {})["chat"];

                var found = false;
                for(var i = 0; i < chats.length; i++) {
                    if (chats[i]["id"] == chat["id"]) {
                        found = true;
                        break;
                    }
                }
                if (!found) {
                  var data = {};
                  if (chat["title"] == undefined) {
                    data = {
                      "id": chat["id"],
                      "isGroup": false,
                      "username": chat["username"],
                    };
                  } else {
                    data = {
                      "id": chat["id"],
                      "isGroup": true,
                      "title": chat["title"],
                    };
                  }
                  chats.push(data);
                }
              });
              var json = JSON.stringify(chats, null, 4);
              $("#print_bot_id").append(document.createTextNode(json));
            } else {
              var json = JSON.stringify(args, null, 4);
              $("#print_bot_id").append(document.createTextNode(json));
            }
          },
          error: function(e) {
            var json = JSON.stringify(e, null, 4);
            $("#print_bot_id").empty();
            $("#print_bot_id").append(document.createTextNode(json));
          }
      });
  });

  $("#send_message").click(function() {
    const telegramBotToken = $("#input_send_message_bot_token").val();
    if (telegramBotToken == "" || telegramBotToken == undefined) {
      $("#print_message").empty();
      $("#print_message").append("Bot í† í°ì„ ì…ë ¥í•˜ì„¸ìš”.");
      return
    }
    const chatID = $("#input_send_message_chat_id").val();
    if (chatID == "" || chatID == undefined) {
      $("#print_message").empty();
      $("#print_message").append("ë³´ë‚´ì§ˆ ì±„íŒ…ë°© IDë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
      return
    }
    const text = $("#input_send_message_text").val();
    if (text == "" || text == undefined) {
      $("#print_message").empty();
      $("#print_message").append("ë³´ë‚¼ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
      return
    }
    const urlPath = "https://api.telegram.org/bot"+telegramBotToken+"/sendMessage?chat_id="+chatID+"&text="+text;
    $.ajax({
        type: "GET",
        url: urlPath,
        success: function(args) {
          var json = JSON.stringify(args, null, 4);
          $("#print_message").empty();
          $("#print_message").append(document.createTextNode(json));
        },
        error: function(e) {
          var json = JSON.stringify(e, null, 4);
          $("#print_message").empty();
          $("#print_message").append(document.createTextNode(json));
        }
      });
  });

  $("#webhook_set").click(function() {
    const telegramBotToken = $("#input_webhook_bot_token").val();
    if (telegramBotToken == "" || telegramBotToken == undefined) {
      $("#print_webhook").empty();
      $("#print_webhook").append("Bot í† í°ì„ ì…ë ¥í•˜ì„¸ìš”.");
      return
    }
    const callbackURL = $("#input_webhook_callbackURL").val();
    if (callbackURL == "" || callbackURL == undefined) {
      $("#print_webhook").empty();
      $("#print_webhook").append("callbackURLì„ ì…ë ¥í•˜ì„¸ìš”.");
      return
    }
    const webhookUrlPath = "https://api.telegram.org/bot"+telegramBotToken+"/setWebhook?url="+callbackURL;
    $.ajax({
        type: "GET",
        url: webhookUrlPath,
        success: function(args) {
          var json = JSON.stringify(args, null, 4);
          $("#print_webhook").empty();
          $("#print_webhook").append(document.createTextNode(json));
        },
        error: function(e) {
          var json = JSON.stringify(e, null, 4);
          $("#print_webhook").empty();
          $("#print_webhook").append(document.createTextNode(json));
        }
    });
  });

  $("#webhook_delete").click(function() {
    const telegramBotToken = $("#input_webhook_bot_token").val();
    if (telegramBotToken == "" || telegramBotToken == undefined) {
      $("#print_webhook").empty();
      $("#print_webhook").append("Bot í† í°ì„ ì…ë ¥í•˜ì„¸ìš”.");
      return
    }
    const webhookUrlPath = "https://api.telegram.org/bot"+telegramBotToken+"/setWebhook?url=";
    $.ajax({
        type: "GET",
        url: webhookUrlPath,
        success: function(args) {
          var json = JSON.stringify(args, null, 4);
          $("#print_webhook").empty();
          $("#print_webhook").append(document.createTextNode(json));
        },
        error: function(e) {
          var json = JSON.stringify(e, null, 4);
          $("#print_webhook").empty();
          $("#print_webhook").append(document.createTextNode(json));
        }
    });
  });

  $("#webhook_info").click(function() {
    const telegramBotToken = $("#input_webhook_bot_token").val();
    if (telegramBotToken == "" || telegramBotToken == undefined) {
      $("#print_webhook").empty();
      $("#print_webhook").append("Bot í† í°ì„ ì…ë ¥í•˜ì„¸ìš”.");
      return
    }
    const webhookUrlPath = "https://api.telegram.org/bot"+telegramBotToken+"/getWebhookInfo";
    $.ajax({
          type: "GET",
          url: webhookUrlPath,
          success: function(args) {
            var json = JSON.stringify(args, null, 4);
            $("#print_webhook").empty();
            $("#print_webhook").append(document.createTextNode(json));
          },
          error: function(e) {
            var json = JSON.stringify(e, null, 4);
            $("#print_webhook").empty();
            $("#print_webhook").append(document.createTextNode(json));
          }
      });
  });

});
</script>



  <!-- Disqus -->
  
  <div class="post-disqus">
      <section id="disqus_thread"></section>
      <script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//devstrory.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  </div>
  

</div>


    <!-- Documents about icons are here: http://fontawesome.io/icons/ -->
<div class="footer">
  <hr />
  <div class="footer-link">
    
    <a href="https://www.facebook.com/groups/docfriends/"><i class="fa fa-facebook" aria-hidden="true"></i></a>
    
	
	
    <a href="https://www.youtube.com/user/Docairs"><i class="fa fa-youtube" aria-hidden="true"></i></a>
    
	
	

    

    
    <a href="https://github.com/Docfriends"><i class="fa fa-github" aria-hidden="true"></i></a>
    
	
	
	
	

    
	
	
	
	
	
	
	
	

    

    

    
    <a href="mailto:apps@docfriends.com"><i class="fa fa-envelope" aria-hidden="true"></i></a>
    

  </div>
  Â© 2018 Docfriends. All rights reserved.
</div>

  </div>
</body>
</html>
