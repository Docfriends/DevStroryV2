<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>구글 캘린더 API</title>

  <!-- CSS -->
  <link rel="stylesheet" href="/DevStrory/assets/css/main.css" type="text/css">

  <!-- Font -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed for Docfriends 기술 블로그" href="/DevStrory/feed.xml" />
    <link href="https://docfriends.github.io/DevStrory/assets/images/favicon.ico" rel="shortcut icon"
          type="image/x-icon"/>
    <link href="https://docfriends.github.io/DevStrory/assets/images/logo.png" rel="icon" type="image/png"/>


  <meta name="apple-mobile-web-app-title" content="DocfriendsTec" />
  <meta name="description" content="닥프렌즈의 기술 블로그"/>
  <meta property="og:title" content="닥프렌즈">
    <meta content="https://docfriends.github.io/DevStrory/" property="og:url">
    <meta content="https://docfriends.github.io/DevStrory/assets/images/logo.png" property="og:image">
  <meta property="og:description" content="닥프렌즈의 기술 블로그"/>
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="">
    <meta content="https://docfriends.github.io/DevStrory/" name="twitter:url">
    <meta content="https://docfriends.github.io/DevStrory/assets/images/logo.png" name="twitter:image">
  <meta name="twitter:description" content="닥프렌즈의 기술 블로그"/>


  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>구글 캘린더 API | Docfriends 기술 블로그</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="구글 캘린더 API" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="구글 캘린더 데이터 받기" />
<meta property="og:description" content="구글 캘린더 데이터 받기" />
<link rel="canonical" href="http://localhost:4000/DevStrory/2019-05-24/google-calendar/" />
<meta property="og:url" content="http://localhost:4000/DevStrory/2019-05-24/google-calendar/" />
<meta property="og:site_name" content="Docfriends 기술 블로그" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-05-24T00:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="구글 캘린더 API" />
<script type="application/ld+json">
{"url":"http://localhost:4000/DevStrory/2019-05-24/google-calendar/","headline":"구글 캘린더 API","datePublished":"2019-05-24T00:00:00+09:00","dateModified":"2019-05-24T00:00:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/DevStrory/2019-05-24/google-calendar/"},"description":"구글 캘린더 데이터 받기","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->



  <!-- Google Analytics -->

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-131153272-1', 'auto');
ga('send', 'pageview');

</script>



</head>

<body>
  <div class="content-container">
    <header class="header">
  <div class="header-title">
    <a href="http://localhost:4000/DevStrory">Docfriends 기술 블로그</a>
  </div>
  <nav class="header-nav">
    
    
    <a href="/DevStrory/">Post</a>
    
    
    
    <a href="/DevStrory/member">Member</a>
    
    
    
    <a href="/DevStrory/archive">Archive</a>
    
    
    
    <a href="/DevStrory/tags">Tags</a>
    
    
    
    <a href="https://github.com/Docfriends">Github</a>
    
    
  </nav>
</header>

<div class="post, container-content">
  <div class="post-title">구글 캘린더 API</div>




<div class="post-writergroup">
  <a class="post-writerselect" href="https://github.com/pikachu987" title="https://github.com/pikachu987">
    <span class="post-writer" >Writer: 김관호 </span>
    <img class="post-profile" src="http://localhost:4000/DevStrory/assets/images/member/pikachu987.png" onerror="this.src='http://localhost:4000/DevStrory/assets/images/member/defaultProfile.png'">
  </a>
</div>




  <span class="post-date">
    <time>24 May 2019</time>
  </span>
  <div class="post-tag">
    <ul>
      
      <li>
        <a href="http://localhost:4000/DevStrory/tags#Google">
          <span>Google</span>
        </a>
      </li>
      
      
      <li>
        <a href="http://localhost:4000/DevStrory/tags#Calendar">
          <span>Calendar</span>
        </a>
      </li>
      
      
    </ul>
  </div>

  <h3 id="1google-console에서-api키-얻기">1.Google Console에서 API키 얻기</h3>

<p><a href="https://console.developers.google.com/" target="blank">Google Console 사이트</a></p>

<h5 id="1-캘린더-라이브러리">1) 캘린더 라이브러리</h5>

<p><img src="http://localhost:4000/DevStrory/images/2019/google-calendar/lib.png" alt="Lib" /></p>

<p>라이브러리를 누릅니다.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/google-calendar/calendar.png" alt="Calendar" /></p>

<p>calendar를 검색하고</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/google-calendar/calendarStart.png" alt="CalendarStart" /></p>

<p>사용설정을 합니다.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/google-calendar/lib.png" alt="Lib" /></p>

<p>사용자 인증 정보로 갑니다.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/google-calendar/key.png" alt="Key" /></p>

<p><strong>사용자 인증 정보 만들기</strong> 에서 <strong>API 키</strong> 를 만듭니다.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/google-calendar/keyValue.png" alt="KeyValue" /></p>

<p>키 제한을 할 수 있습니다.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/google-calendar/keyRole.png" alt="KeyRole" /></p>

<p>calendar만 사용할수 있게 제한을 할 수 있습니다.</p>

<h3 id="2캘린더에서-id-얻기">2.캘린더에서 ID 얻기</h3>

<p><a href="https://calendar.google.com/calendar/" target="blank">Google Calendar 사이트</a></p>

<h5 id="1-캘린더">1) 캘린더</h5>

<p><img src="http://localhost:4000/DevStrory/images/2019/google-calendar/cal.png" alt="Cal" /></p>

<p>원하는 캘린더에 <strong>설정 및 공유</strong> 를 들어갑니다.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/google-calendar/calAuth.png" alt="CalAuth" /></p>

<p>캘린더 엑세스 권한을 설정합니다.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/google-calendar/calID.png" alt="CalID" /></p>

<p>캘린더 ID를 얻었습니다 🎉🎉🎉</p>

<p><a href="https://www.googleapis.com/calendar/v3/calendars//events?orderBy=startTime&amp;singleEvents=true&amp;timeMax=&amp;timeMin=&amp;key=" target="blank">https://www.googleapis.com/calendar/v3/calendars/${calendarID}/events?orderBy=startTime&amp;singleEvents=true&amp;timeMax=${maxTime}&amp;timeMin=${minTime}&amp;key=${googleKey}</a></p>

<p>${calendarID}는 찾은 calendarID 를 입력해 줍니다.<br />
${googleKey}는 googleKey를 입력해 줍니다.<br />
${minTime}검색할 최소 날짜를 입력해 줍니다.<br />
${maxTime}검색할 최대 날짜를 입력해 줍니다.</p>

<p>시간은 RFC3339 룰을 사용합니다.</p>

<p>minTime를 2019-05-23T00:00:00Z<br />
maxTime 2019-05-25T00:00:00Z</p>

<p>를 해보겠습니다.</p>

<p><img src="http://localhost:4000/DevStrory/images/2019/google-calendar/calJson.png" alt="CalJson" /></p>

<p><span>calendarID 입력</span><br />
<input id="input_id" type="text" value="" placeholder="calendarID를 입력해 주세요." style="height: 40px; width: 100%; border: 2px solid black; border-radius: 5px; font-size: 15px;" />
<span>googleKey 입력</span><br />
<input id="input_googleKey" type="text" value="" placeholder="googleKey를 입력해 주세요." style="height: 40px; width: 100%; border: 2px solid black; border-radius: 5px; font-size: 15px;" />
<span>최소 ~ 최대 일정 입력</span><br />
<input id="input_min" type="date" value="" style="height: 40px; width: 48%; border: 2px solid black; border-radius: 5px; font-size: 15px;" /> ~
<input id="input_max" type="date" value="" style="height: 40px; width: 48%; border: 2px solid black; border-radius: 5px; font-size: 15px;" />
(결과값 간단히 보기 <input id="check_find" checked="true" type="checkbox" />)<br />
<button id="search_cal" style="height:44px; width: 15%; border-top: 2px solid black; border-radius: 5px; font-size: 16px; background-color: black; color: white;">캘린더 조회</button></p>
<pre id="print_json" style="padding: 0px; margin: 0px;"></pre>

<h3 id="3lambda-코드">3.Lambda 코드</h3>

<h5 id="1-code">1) Code</h5>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">https</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">util</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">util</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">todayDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
  <span class="c1">// var yesterdayDate = new Date(todayDate.getTime() - 1000*60*60*24);</span>
  <span class="c1">// var tomorrowDate = new Date(todayDate.getTime() + 1000*60*60*24);</span>
  <span class="c1">// var twoDayAgoDate = new Date(todayDate.getTime() + 1000*60*60*24*2);</span>

  <span class="kd">var</span> <span class="nx">calendarID</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">googleKey</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
  <span class="nx">requestAPI</span><span class="p">({</span>
    <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">:</span> <span class="mi">443</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">www.googleapis.com</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="s2">`/calendar/v3/calendars/</span><span class="p">${</span><span class="nx">calendarID</span><span class="p">}</span><span class="s2">/events?orderBy=startTime&amp;singleEvents=true&amp;timeMax=</span><span class="p">${</span><span class="nx">maxRFC3339</span><span class="p">(</span><span class="nx">todayDate</span><span class="p">)}</span><span class="s2">&amp;timeMin=</span><span class="p">${</span><span class="nx">minRFC3339</span><span class="p">(</span><span class="nx">todayDate</span><span class="p">)}</span><span class="s2">&amp;key=</span><span class="p">${</span><span class="nx">googleKey</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">:</span> <span class="dl">""</span><span class="p">,</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Access-Control-Allow-Origin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">*</span><span class="dl">"</span><span class="p">},</span>
    <span class="na">body</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Success</span><span class="dl">"</span>
  <span class="p">};</span>
  <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// 통신 API</span>
<span class="kd">function</span> <span class="nx">requestAPI</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">errorCallback</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">method</span><span class="p">:</span> <span class="p">(</span><span class="nx">request</span><span class="p">[</span><span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">),</span>
      <span class="na">hostname</span><span class="p">:</span> <span class="p">(</span><span class="nx">request</span><span class="p">[</span><span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="dl">""</span><span class="p">),</span>
      <span class="na">port</span><span class="p">:</span> <span class="p">(</span><span class="nx">request</span><span class="p">[</span><span class="dl">"</span><span class="s2">port</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="mi">443</span><span class="p">),</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">(</span><span class="nx">request</span><span class="p">[</span><span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">}),</span>
      <span class="na">path</span><span class="p">:</span> <span class="p">(</span><span class="nx">request</span><span class="p">[</span><span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="dl">""</span><span class="p">)</span>
  <span class="p">};</span>
  <span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">setEncoding</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8</span><span class="dl">'</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="dl">''</span><span class="p">;</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">body</span> <span class="o">=</span> <span class="nx">body</span> <span class="o">+</span> <span class="nx">chunk</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">==</span> <span class="mi">200</span> <span class="o">||</span> <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">200</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">errorCallback</span><span class="p">(</span><span class="s2">`statusCode Error: </span><span class="p">${</span><span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">errorCallback</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">responseText</span><span class="p">)</span>
  <span class="p">});</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">util</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="dl">"</span><span class="s2">%j</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">[</span><span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">]</span> <span class="o">||</span> <span class="dl">""</span><span class="p">)));</span>
  <span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// 시간</span>
<span class="kd">function</span> <span class="nx">minRFC3339</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">?</span> <span class="s2">`0</span><span class="p">${</span><span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span><span class="s2">`</span> <span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">day</span>  <span class="o">=</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">?</span> <span class="s2">`0</span><span class="p">${</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()}</span><span class="s2">`</span> <span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()}</span><span class="s2">`</span><span class="p">;</span>
  <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">year</span><span class="p">}</span><span class="s2">-</span><span class="p">${</span><span class="nx">month</span><span class="p">}</span><span class="s2">-</span><span class="p">${</span><span class="nx">day</span><span class="p">}</span><span class="s2">T00:00:00Z`</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// 시간</span>
<span class="kd">function</span> <span class="nx">maxRFC3339</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">?</span> <span class="s2">`0</span><span class="p">${</span><span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span><span class="s2">`</span> <span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">day</span>  <span class="o">=</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">?</span> <span class="s2">`0</span><span class="p">${</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()}</span><span class="s2">`</span> <span class="p">:</span> <span class="s2">`</span><span class="p">${</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()}</span><span class="s2">`</span><span class="p">;</span>
  <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">year</span><span class="p">}</span><span class="s2">-</span><span class="p">${</span><span class="nx">month</span><span class="p">}</span><span class="s2">-</span><span class="p">${</span><span class="nx">day</span><span class="p">}</span><span class="s2">T23:59:59Z`</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<script src="https://code.jquery.com/jquery-1.12.4.js"></script>

<script type="text/javascript">
$(document).ready(function() {

  $("#search_cal").click(function() {
    const id = $("#input_id").val();
    if (id == "" || id == undefined) {
      $("#print_json").empty();
      $("#print_json").append("id를 입력하세요.");
      return
    }

    const googleKey = $("#input_googleKey").val();
    if (googleKey == "" || googleKey == undefined) {
      $("#print_json").empty();
      $("#print_json").append("googleKey를 입력하세요.");
      return
    }

    const min = $("#input_min").val();
    if (min == "" || min == undefined) {
      $("#print_json").empty();
      $("#print_json").append("최소 날짜를 입력하세요.");
      return
    }

    const max = $("#input_max").val();
    if (max == "" || max == undefined) {
      $("#print_json").empty();
      $("#print_json").append("최대 날짜를 입력하세요.");
      return
    }

    var minDate = new Date(min);
    var maxDate = new Date(max);

    if (minDate > maxDate) {
      $("#print_json").empty();
      $("#print_json").append("최소 날짜가 최대 날짜를 넘으면 안됩니다.");
      return
    }

    const urlPath = `https://www.googleapis.com/calendar/v3/calendars/${id}/events?orderBy=startTime&singleEvents=true&timeMax=${maxRFC3339(maxDate)}&timeMin=${minRFC3339(minDate)}&key=${googleKey}`;

    $.ajax({
          type: "GET",
          url: urlPath,
          success: function(args) {
            $("#print_json").empty();
            if ($("#check_find").is(':checked')) {
              var json = JSON.stringify(args["items"], null, 4);
              $("#print_json").append(document.createTextNode(json));
            } else {
              var json = JSON.stringify(args, null, 4);
              $("#print_json").append(document.createTextNode(json));
            }
          },
          error: function(e) {
            var json = JSON.stringify(e, null, 4);
            $("#print_json").empty();
            $("#print_json").append(document.createTextNode(json));
          }
      });
  });

  // 시간
  function minRFC3339(date) {
    var year = date.getFullYear();
    var month = (date.getMonth() + 1 < 10) ? `0${date.getMonth() + 1}` : `${date.getMonth() + 1}`;
    var day  = (date.getDate() < 10) ? `0${date.getDate()}` : `${date.getDate()}`;
    return `${year}-${month}-${day}T00:00:00Z`;
  }

  // 시간
  function maxRFC3339(date) {
    var year = date.getFullYear();
    var month = (date.getMonth() + 1 < 10) ? `0${date.getMonth() + 1}` : `${date.getMonth() + 1}`;
    var day  = (date.getDate() < 10) ? `0${date.getDate()}` : `${date.getDate()}`;
    return `${year}-${month}-${day}T23:59:59Z`;
  }
});
</script>



  <!-- Disqus -->
  
  <div class="post-disqus">
      <section id="disqus_thread"></section>
      <script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//devstrory.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  </div>
  

</div>


    <!-- Documents about icons are here: http://fontawesome.io/icons/ -->
<div class="footer">
  <hr />
  <div class="footer-link">
    
    <a href="https://www.facebook.com/groups/docfriends/"><i class="fa fa-facebook" aria-hidden="true"></i></a>
    
	
	
    <a href="https://www.youtube.com/user/Docairs"><i class="fa fa-youtube" aria-hidden="true"></i></a>
    
	
	

    

    
    <a href="https://github.com/Docfriends"><i class="fa fa-github" aria-hidden="true"></i></a>
    
	
	
	
	

    
	
	
	
	
	
	
	
	

    

    

    
    <a href="mailto:apps@docfriends.com"><i class="fa fa-envelope" aria-hidden="true"></i></a>
    

  </div>
  © 2018 Docfriends. All rights reserved.
</div>

  </div>
</body>
</html>
